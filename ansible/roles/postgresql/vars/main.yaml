---
# PostgreSQL version
postgresql_version: 15

# PostgreSQL configuration
postgresql_listen_addresses: "localhost"
postgresql_port: 5432
postgresql_max_connections: 100
postgresql_shared_buffers: "128MB"
postgresql_effective_cache_size: "1GB"

# Database and user setup
postgresql_databases:
  - name: myapp
    encoding: UTF8
    lc_collate: en_US.UTF-8
    lc_ctype: en_US.UTF-8

postgresql_users:
  - name: myuser
    password: "vault_path"
    databases: [myapp]
    privileges: 
      - ALL

# Connection settings
postgresql_pg_hba_config:
  - { type: local, database: all, user: postgres, auth_method: peer }
  - { type: local, database: all, user: all, auth_method: peer }
  - { type: host, database: all, user: all, address: "127.0.0.1/32", auth_method: md5 }
  - { type: host, database: all, user: all, address: "::1/128", auth_method: md5 }
  - { type: host, database: all, user: all, address: "192.168.56.0/24", auth_method: md5 }